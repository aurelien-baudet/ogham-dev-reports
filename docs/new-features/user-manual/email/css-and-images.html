<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>Untitled</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="../..//javascripts/steps.js"></script>
<script type="text/javascript" src="../..//javascripts/sourcecode/source-utils.js"></script>
<script type="text/javascript" src="../..//javascripts/sourcecode/highlight-lines.js"></script>
<script type="text/javascript" src="../..//javascripts/sourcecode/collapse-lines.js"></script>
<script type="text/javascript" src="../..//javascripts/tabcontainer.js"></script>
<script type="text/javascript" src="../..//javascripts/toc.js"></script>
<link rel="stylesheet" type="text/css" href="../..//styles/custom-styles.css" />
<link rel="stylesheet" type="text/css" href="../..//styles/tabcontainer.css" />
<link rel="stylesheet" type="text/css" href="../..//styles/steps.css" />
<link rel="stylesheet" type="text/css" href="../..//styles/toc.css" />
<link rel="stylesheet" type="text/css" href="../..//styles/sourcecode/collapse-lines.css" />
<link rel="stylesheet" type="text/css" href="../..//styles/sourcecode/highlight-lines.css" />
</head>
<body class="book">
<div id="header">
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>When you develop a Web application, you can use HTML for the content and CSS for
layout and theming. HTML and CSS can use images to make a beautiful Web page.
Each concern is separated in a different file. This is a good practice.</p>
</div>
<div class="paragraph">
<p>However, writing an HTML email is totally different. Indeed, email clients are
not as evolved as Web browsers. Even worse, some clients disable some features
on purpose (like GMail that prevents using <code>style</code> tag). To make an email work
on several clients, you should follow these rules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;img&gt;</code> tags that use local images must be embedded</p>
</li>
<li>
<p>Use XHTML instead of HTML</p>
</li>
<li>
<p>Remove HTML comments (except conditional comments used to target Outlook)</p>
</li>
<li>
<p>Add border=0 on all images to avoid an ugly border</p>
</li>
<li>
<p>Do not write shortcut CSS values (<code>padding: 4px 4px 4px 4px;</code> instead of
<code>padding: 4px</code>)</p>
</li>
<li>
<p>Padding is not supported on some clients so you must use margins instead
(adding a parent just for the layout)</p>
</li>
<li>
<p>Background images on body should be moved on another node</p>
</li>
<li>
<p>CSS3 properties are not supported</p>
</li>
<li>
<p>Images must have <code>alt</code> attribute</p>
</li>
<li>
<p>&#8230;&#8203;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There are many other rules but the developer should not be constrained and
should be able to write its HTML and CSS like as usual in Web browsers. Ogham
simplifies image and CSS integration and is able to partially rewrite the HTML.</p>
</div>
<div class="paragraph tab-container  no-max-height">
<p>Sample with template</p>
</div>
<div class="paragraph tab">
<p><span class="image"><img src="../../images//icons/java-logo.png" alt="java logo" width="16" height="30"></span> Java</p>
</div>
<div class="listingblock collapse-lines:1-10,36-48 irrelevant-lines:1-10,12-19 highlight-lines:30-31">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package fr.sii.ogham.sample.standard.email;

import java.util.Properties;

import fr.sii.ogham.core.builder.MessagingBuilder;
import fr.sii.ogham.core.exception.MessagingException;
import fr.sii.ogham.core.service.MessagingService;
import fr.sii.ogham.email.message.Email;

public class HtmlWithImagesAndCssTemplateSample {
  public static void main(String[] args) throws MessagingException {
    // configure properties (could be stored in a properties file or defined
    // in System properties)
    Properties properties = new Properties();
    properties.setProperty("mail.smtp.host", "&lt;your server host&gt;");
    properties.setProperty("mail.smtp.port", "&lt;your server port&gt;");
    properties.setProperty("ogham.email.from.default-value", "&lt;email address to display for the sender user&gt;");
    // Instantiate the messaging service using default behavior and
    // provided properties
    MessagingService service = MessagingBuilder.standard()
        .environment()
          .properties(properties)
          .and()
        .build();
    // send the email using fluent API
    // Note that the extension of the template is not given. This version
    // automatically takes the provided path and adds the '.html' extension
    // for the HTML template and '.txt.ftl' for text template
    service.send(new Email()
            .body().template("classpath:/template/withImagesAndCss/resources",    <i class="conum" data-value="1"></i><b>(1)</b>
                              new SimpleBean("foo", 42))        <i class="conum" data-value="2"></i><b>(2)</b>
            .to("ogham-test@yopmail.com"));
  }

  public static class SimpleBean {
    private String name;
    private int value;
    public SimpleBean(String name, int value) {
      super();
      this.name = name;
      this.value = value;
    }
    public String getName() {
      return name;
    }
    public int getValue() {
      return value;
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The path to the templates (<code>/template/withImagesAndCss/resources.html</code> for the main body,
<code>/template/withImagesAndCss/resources.txt.ftl</code> for the text alternative)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The template context</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/HtmlWithImagesAndCssTemplateSample.java?ts=2">Source code of the sample</a></p>
</div>
<div class="paragraph tab">
<p><span class="image"><img src="../../images//icons/thymeleaf-html.jpg" alt="thymeleaf html" width="30" height="30"></span> ThymeLeaf template</p>
</div>
<div class="listingblock highlight-lines:7-8,12,18,27,39,42">
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;!DOCTYPE html&gt;
&lt;html xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /&gt;
&lt;title&gt;HtmlWithImagesAndCssTemplateSample&lt;/title&gt;
&lt;meta name="viewport" content="width=device-width, initial-scale=1.0" /&gt;
&lt;link href="css/layout.css" rel="stylesheet" /&gt;                             <i class="conum" data-value="1"></i><b>(1)</b>
&lt;link href="css/theme.css" rel="stylesheet" /&gt;                              <i class="conum" data-value="2"></i><b>(2)</b>
&lt;/head&gt;
&lt;body&gt;
  &lt;header&gt;
    &lt;img src="images/h1.gif" alt="Creating Email Magic" /&gt;                      <i class="conum" data-value="3"></i><b>(3)</b>
  &lt;/header&gt;
  &lt;div class="content"&gt;
    &lt;span th:text="${name}"&gt;name&lt;/span&gt;
    &lt;p th:text="${value}"&gt;value&lt;/p&gt;
    &lt;div class="left"&gt;
      &lt;img src="images/left.gif" data-inline-image="base64" /&gt;                  <i class="conum" data-value="4"></i><b>(4)</b>
      &lt;p class="text"&gt;
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In
        tempus adipiscing felis, sit amet blandit ipsum volutpat sed. Morbi
        porttitor, eget accumsan dictum, nisi libero ultricies ipsum, in
        posuere mauris neque at erat.
      &lt;/p&gt;
    &lt;/div&gt;
    &lt;div class="right"&gt;
      &lt;img src="images/right.gif" data-inline-image="attach" /&gt;                 <i class="conum" data-value="5"></i><b>(5)</b>
      &lt;p class="text"&gt;
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In
        tempus adipiscing felis, sit amet blandit ipsum volutpat sed. Morbi
        porttitor, eget accumsan dictum, nisi libero ultricies ipsum, in
        posuere mauris neque at erat.
      &lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;
  &lt;footer&gt;
    &lt;div class="social"&gt;
      &lt;a href="http://www.twitter.com/"&gt;
        &lt;img src="images/tw.gif" alt="Twitter" /&gt;                       <i class="conum" data-value="6"></i><b>(6)</b>
      &lt;/a&gt;
      &lt;a href="http://www.facebook.com/"&gt;
        &lt;img src="images/fb.gif" alt="Facebook" data-inline-image="skip" /&gt;           <i class="conum" data-value="7"></i><b>(7)</b>
      &lt;/a&gt;
    &lt;/div&gt;
    &lt;div class="sender-info"&gt;
      &amp;reg; Someone, somewhere 2013&lt;br /&gt;
      &lt;a href="#" class="white" data-inline-styles="skip"&gt;Unsubscribe&lt;/a&gt; to this newsletter instantly  <i class="conum" data-value="8"></i><b>(8)</b>
    &lt;/div&gt;
  &lt;/footer&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The CSS is parsed by Ogham and applied directly on the HTML (using <code>style</code> attribute)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The CSS is parsed by Ogham and applied directly on the HTML (using <code>style</code> attribute). The CSS may
contain rules that override some rules of other CSS files (like in a browser)</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The image is automatically embedded (the path is replaced by a
<a href="https://tools.ietf.org/html/rfc4021#section-2.2.2">Content-ID (or CID)</a> and the image is attached
to the email using <code>ContentDisposition.INLINE</code> with the Content-ID header). The content type is
automatically determined</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The image is converted to a base64 string. The <code>src</code> attribute of the image is updated using
<a href="https://en.wikipedia.org/wiki/Data_URI_scheme">data URI scheme</a>. The content type is automatically
determined</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Same as &lt;3&gt;</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Same as &lt;3&gt;</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>The image is not inlined by Ogham. This can be useful to embed it manually.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/withImagesAndCss/resources.html?ts=2">Source code of the HTML template</a></p>
</div>
<div class="paragraph tab">
<p><span class="image"><img src="../../images//icons/css.png" alt="css" width="37" height="30"></span> CSS</p>
</div>
<div class="listingblock">
<div class="title">layout.css</div>
<div class="content">
<pre class="highlight"><code class="language-css" data-lang="css">body {
  margin: 10px auto 30px auto;
  width: 600px;
}

header {
  padding: 40px 30px;
}

header img {
  display: block;
  margin: auto;
}


.content {
  padding: 40px 30px;
}

.left,
.right {
  width: 250px;
  display: inline-block;
}

.left {
  margin-right: 36px;
}

footer {
  padding: 30px;
}

footer .sender-info,
footer .social {
  text-align: center;
}
footer .social a {
  display: inline-block;
}
footer .sender-info {
  margin-top: 20px;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">theme.css</div>
<div class="content">
<pre class="highlight"><code class="language-css" data-lang="css">body {
  border: 1px solid #ccc;
}

header {
  background: #70bbd9;
}

.content {
  text-align: justify;
}

footer {
  color:#ffffff;
  font-family:Arial, sans-serif;
  font-size:14px;
  background: #ee4c50;
}

footer .social a {
  color:#ffffff;
}

.white {
  color: #fff;
}</code></pre>
</div>
</div>
<div class="paragraph tab">
<p><span class="image"><img src="../../images//icons/html.png" alt="html" width="37" height="30"></span> Sent HTML</p>
</div>
<div class="exampleblock TODO">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Add code of the generated HTML with all transformations</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph tab-container-end">
<p>-</p>
</div>
<div class="paragraph">
<p>Here is the list of supported transformations:</p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-check-square-o"></i> <code>&lt;img&gt;</code> tags that use local images are embedded (using <code>cid</code> reference)</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> <code>&lt;img&gt;</code> tags that use local images are embedded (using base64 data URI)</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> Inline CSS rules using <code>style</code> attribute</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> <code>background</code> images that use local images are embedded (using <code>cid</code> reference)</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> <code>background</code> images that use local images are embedded (using base64 data URI)</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Use XHTML instead of HTML</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Tables used for layout explicitly set default values</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Remove HTML comments (except conditional comments used to target Outlook)</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Add border=0 on all images to avoid an ugly border</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Do not write shortcut CSS values (<code>padding: 4px 4px 4px 4px;</code> instead of <code>padding: 4px</code>)</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Padding is not supported on some clients so you must use margins instead (adding a parent just for the layout)</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Background images on body should be moved on another node</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Images must have <code>alt</code> attribute</p>
</li>
</ul>
</div>
<div class="exampleblock TODO">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>List all other rules</p>
</li>
<li>
<p>Indicate what will be supported and what won&#8217;t and why</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-07-28 08:13:00 UTC
</div>
</div>
</body>
</html>