<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>Untitled</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="../..//javascripts/steps.js"></script>
<script type="text/javascript" src="../..//javascripts/sourcecode/source-utils.js"></script>
<script type="text/javascript" src="../..//javascripts/sourcecode/highlight-lines.js"></script>
<script type="text/javascript" src="../..//javascripts/sourcecode/collapse-lines.js"></script>
<script type="text/javascript" src="../..//javascripts/tabcontainer.js"></script>
<script type="text/javascript" src="../..//javascripts/toc.js"></script>
<link rel="stylesheet" type="text/css" href="../..//styles/custom-styles.css" />
<link rel="stylesheet" type="text/css" href="../..//styles/tabcontainer.css" />
<link rel="stylesheet" type="text/css" href="../..//styles/steps.css" />
<link rel="stylesheet" type="text/css" href="../..//styles/toc.css" />
<link rel="stylesheet" type="text/css" href="../..//styles/sourcecode/collapse-lines.css" />
<link rel="stylesheet" type="text/css" href="../..//styles/sourcecode/highlight-lines.css" />
</head>
<body class="book">
<div id="header">
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This sample shows how to send a SMS with a content following a template engine language.</p>
</div>
<div class="paragraph tab-container no-max-height">
<p>Sample with template</p>
</div>
<div class="paragraph tab">
<p><span class="image"><img src="../../images//icons/java-logo.png" alt="java logo" width="16" height="30"></span> Java</p>
</div>
<div class="listingblock collapse-lines:1-9,35-47 irrelevant-lines:1-9,12-21 highlight-lines:29,30">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package fr.sii.ogham.sample.standard.sms;

import java.util.Properties;

import fr.sii.ogham.core.builder.MessagingBuilder;
import fr.sii.ogham.core.exception.MessagingException;
import fr.sii.ogham.core.service.MessagingService;
import fr.sii.ogham.sms.message.Sms;

public class TemplateSample {
  public static void main(String[] args) throws MessagingException {
    // configure properties (could be stored in a properties file or defined
    // in System properties)
    Properties properties = new Properties();
    properties.setProperty("ogham.sms.smpp.host", "&lt;your server host&gt;");
    properties.setProperty("ogham.sms.smpp.port", "&lt;your server port&gt;");
    properties.setProperty("ogham.sms.smpp.system-id", "&lt;your server system ID&gt;");
    properties.setProperty("ogham.sms.smpp.password", "&lt;your server password&gt;");
    properties.setProperty("ogham.sms.from.default-value", "&lt;phone number to display for the sender&gt;");
    // Instantiate the messaging service using default behavior and
    // provided properties
    MessagingService service = MessagingBuilder.standard()                              <i class="conum" data-value="1"></i><b>(1)</b>
        .environment()
          .properties(properties)                                                 <i class="conum" data-value="2"></i><b>(2)</b>
          .and()
        .build();                                                                   <i class="conum" data-value="3"></i><b>(3)</b>
    // send the sms using fluent API
    service.send(new Sms()                                                              <i class="conum" data-value="4"></i><b>(4)</b>
            .message().template("classpath:/template/thymeleaf/simple.txt",     <i class="conum" data-value="5"></i><b>(5)</b>
                          new SimpleBean("foo", 42))              <i class="conum" data-value="6"></i><b>(6)</b>
            .to("+33752962193"));
  }

  public static class SimpleBean {
    private String name;
    private int value;
    public SimpleBean(String name, int value) {
      super();
      this.name = name;
      this.value = value;
    }
    public String getName() {
      return name;
    }
    public int getValue() {
      return value;
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Use the standard builder (predefined behavior)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Register the custom properties</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Create a MessagingService instance</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Send a SMS with message that comes from the evaluated template. The sender address is automatically
set using <code>ogham.sms.from.default-value</code> property</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Indicate the path to the template file (in the classpath)</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Use any bean object for replacing variables in template</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/sms/TemplateSample.java?ts=2">Source code of the sample</a>.</p>
</div>
<div class="paragraph tab">
<p><span class="image"><img src="../../images//icons/thymeleaf.jpg" alt="thymeleaf" width="30" height="30"></span> ThymeLeaf template</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">[[${name}]] [[${value}]]</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="https://github.com/groupe-sii/ogham/blob/master/sample-standard-usage/src/main/resources/template/thymeleaf/simple.txt?ts=2">Source code of the template</a></p>
</div>
<div class="paragraph tab-container-end">
<p>-</p>
</div>
<div class="paragraph">
<p>Using a template is straightforward. Instead of providing a string content (using <code>.message().string(&#8230;&#8203;)</code>),
you call <code>.message().template(&#8230;&#8203;, &#8230;&#8203;)</code>.
The <code>template</code> method requires two pieces of information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The path to the template</p>
</li>
<li>
<p>The variables to evaluate in the template</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The path to the template is a string with a <strong>lookup</strong> prefix. The lookup prefix is used to indicate
where to search the template (from file system, from classpath or anywhere else). Here we explicitly
ask to load the template from classpath (using prefix <code>classpath:</code>). If no lookup is defined,
classpath is used by default. See <a href="../../user-manual.html#resource-resolution">Resource resolution section</a> for more information.</p>
</div>
<div class="paragraph">
<p>The variables are any object you are using in your application. No need to convert your object to
a particular format. Directly use what you want.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-07-31 20:28:39 UTC
</div>
</div>
</body>
</html>